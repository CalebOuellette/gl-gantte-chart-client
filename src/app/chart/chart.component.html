<h1>Chart One</h1>

<div>
  <div class="now" [ngStyle]="{ left: nowOffset + 'px' }">
    Now
    <div id="verticalNowLine"></div>
  </div>

  <div *ngFor="let channel of channels" class="channel">
    <div >
      <div class="info" *ngIf="channel.currentTask" [ngStyle]="{ width: (nowOffset - 5) + 'px' }">
        Task {{channel.currentTask.id}} {{(( nowDate.getTime() - channel.currentTask.startDate.getTime() ) / channel.currentTask.totalTime)| percentRound | percent: '1.0-0' }}
      </div>
      <div *ngFor="let item of channel.tasks" [ngStyle]="{ left: (nowOffset + (  -1 * (nowDate.getTime() - item.startDate.getTime()) / zoomScale) ) +'px', 'backgroundColor': item.color, 'width': (item.totalTime / zoomScale) + 'px' }"
        class="task">
        <div  (mousedown)="taskMove(item, $event)" class="dragZone">
          <div *ngIf="!channel.currentTask || channel.currentTask.id != item.id">
             Task {{item.id}} {{(( nowDate.getTime() - item.startDate.getTime() ) / item.totalTime)| percentRound | percent: '1.0-0' }}
          </div>
        </div>
        <div (mousedown)="taskExpand(item, $event)" class="expandZone" >
        </div>


      </div>
      <div  (mousedown)="addTask(channel)" class="addButton" [ngStyle]="{ left: ((nowOffset + (  -1 * (nowDate.getTime() - channel.lastTask.startDate.getTime() - channel.lastTask.totalTime ) / zoomScale) )+ 5) +'px'}" >


      </div>
    </div>
  </div>
</div>